from  rest_framework import status,APIView,response
from UEFSevents import Events
from .models import Event,Adress,Space,Image
from .serializers import EventSerializer,AdressSerializer,ImageSerializer,SpaceSerializer

class EventAPIView(APIView):
    def get(self,request):
        events=Events.objects.all()
        serializer=EventSerializer(events,many=True)
        return response(serializer.data)

class AdressAPIView(APIView):
    def get(self,request):
        adresses=Adress.objects.all()
        serializer=AdressSerializer(adresses,many=True)
        return response(serializer.data)
    
class SpaceAPIView(APIView):
    def get(self,request):
        spaces=Space.objects.all()
        serializer=SpaceSerializer(spaces,many=True)
        return response(serializer.data)
    
class ImageAPIView(APIView):
    def get(self,request):
        images=Image.objects.all()
        serializer=ImageSerializer(images,many=True)
        return response(serializer.data)

def post(self,request):
    serializer = EventSerializer(data=request.data)
    serializer = AdressSerializer(data=request.data)
    serializer = SpaceSerializer(data=request.data)
    serializer = ImageSerializer(data=request.data)
    serializer.is_valid(raise_exception=True)
    serializer.save()
    return response(serializer.data,status=status.HTTP_201_CREATED)


